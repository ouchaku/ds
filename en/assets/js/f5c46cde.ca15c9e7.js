"use strict";(self.webpackChunktest_website=self.webpackChunktest_website||[]).push([[27741],{37052:(n,r,t)=>{t.r(r),t.d(r,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var e=t(74848),i=t(28453);const s={},o="local build \u7528 bash script",l={id:"tips/sh_script_to_local_build",title:"local build \u7528 bash script",description:"\u4ee5\u4e0b\u306f\u4e07\u4eba\u5411\u3051\u306e\u89e3\u8aac\u3067\u306f\u306a\u304f\u3001\u79c1\u7684\u306a\u5fd8\u5099\u9332\u3002",source:"@site/docs/tips/sh_script_to_local_build.md",sourceDirName:"tips",slug:"/tips/sh_script_to_local_build",permalink:"/ds/en/tips/sh_script_to_local_build",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"PyQt \u3067\u4f5c\u6210\u3057\u305f GUI \u30c4\u30fc\u30eb\u3092 CLaunch \u3067\u8d77\u52d5\u3059\u308b\u65b9\u6cd5",permalink:"/ds/en/tips/how_to_register_qt_tools_claunch"},next:{title:"GitHub \u306b deploy \u3059\u308b\u305f\u3081\u306e bash script",permalink:"/ds/en/tips/sh_script_to_deploy_github"}},a={},c=[{value:"local build \u306e\u624b\u9806",id:"local-build-\u306e\u624b\u9806",level:2},{value:"local build \u7528 bash script",id:"local-build-\u7528-bash-script-1",level:2},{value:"\u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u7528 python script",id:"\u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u7528-python-script",level:2}];function d(n){const r={admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.h1,{id:"local-build-\u7528-bash-script",children:"local build \u7528 bash script"}),"\n",(0,e.jsxs)(r.admonition,{title:"\u6ce8\u610f",type:"info",children:[(0,e.jsx)(r.p,{children:"\u4ee5\u4e0b\u306f\u4e07\u4eba\u5411\u3051\u306e\u89e3\u8aac\u3067\u306f\u306a\u304f\u3001\u79c1\u7684\u306a\u5fd8\u5099\u9332\u3002\r\n\u74b0\u5883\u306f Windows11 + miniconda"}),(0,e.jsx)(r.p,{children:"GitHub \u3067 Docusaurus \u5c02\u7528\u306e repository \u3092\u4f5c\u6210\u3057\u3001Pages \u306e\u8a2d\u5b9a\u3092\u65e2\u306b\u6e08\u307e\u305b\u3066\u3044\u308b\u3082\u306e\u3068\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3002"})]}),"\n",(0,e.jsx)(r.h2,{id:"local-build-\u306e\u624b\u9806",children:"local build \u306e\u624b\u9806"}),"\n",(0,e.jsx)(r.p,{children:"Git-bash \u7aef\u672b\u304b\u3089\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b\u3002"}),"\n",(0,e.jsxs)(r.ol,{children:["\n",(0,e.jsx)(r.li,{children:"\u6700\u521d\u306b\u5c02\u7528\u306e miniconda \u74b0\u5883\u306b\u5165\u3063\u3066\u304b\u3089\u3001\u4f5c\u696d directory \u306b cd \u3059\u308b\u3002"}),"\n"]}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-bash",metastring:'title="bash"',children:"conda activate docusaurus\r\ncd /c/my_prog/docusaurus/github_page\n"})}),"\n",(0,e.jsxs)(r.ol,{start:"2",children:["\n",(0,e.jsx)(r.li,{children:"\u8a18\u4e8b\u306e\u8ffd\u52a0\u3084\u7de8\u96c6\uff08blog \u3084 docs/UFO \u306a\u3069\u306e\u8a72\u5f53\u3059\u308b directory \u3067\u4f5c\u696d\uff09"}),"\n",(0,e.jsxs)(r.li,{children:["\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3002\r\n",(0,e.jsx)(r.code,{children:"cd /c/my_prog/docusaurus/github_page"})]}),"\n",(0,e.jsxs)(r.li,{children:["build \u3092\u5b9f\u884c\u3002\r\n",(0,e.jsx)(r.code,{children:"./make_local_build.sh"})]}),"\n",(0,e.jsx)(r.li,{children:"local PC \u306e Apache \u3067\u30b5\u30a4\u30c8\u3092\u78ba\u8a8d\u3002"}),"\n"]}),"\n",(0,e.jsx)(r.h2,{id:"local-build-\u7528-bash-script-1",children:"local build \u7528 bash script"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-bash",metastring:'title="make_local_build.sh"',children:'#!/bin/bash\r\n#\r\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\r\ncommit_message="fix or add article"\r\n\r\n\r\n# \u7591\u4f3c\u30ea\u30f3\u30af\u306e\u51e6\u7406\r\npython solv_pseudo_symlink.py\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: python solv_pseudo_symlink.py"\r\n  exit 1\r\nelse\r\n  echo "PASS: python solv_pseudo_symlink.py"\r\nfi\r\n\r\n\r\n# \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u89e3\u6790\r\nwhile getopts "m:" opt; do\r\n  case $opt in\r\n    m)\r\n      commit_message=$OPTARG\r\n      ;;\r\n    *)\r\n      echo "Usage: $0 [-m commit_message]"\r\n      exit 1\r\n      ;;\r\n  esac\r\ndone\r\n\r\n# \u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u3042\u308b\u304b\u3092\u78ba\u8a8d\r\nif git diff-index --quiet HEAD --; then\r\n  echo "No changes to commit."\r\n  exit 0\r\nfi\r\n\r\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u524a\u9664\u3059\u308b\r\nif [ -d ./build ]; then\r\n  rm -rf build\r\n  if [ $? -ne 0 ]; then\r\n    echo "FAIL: rm -rf build"\r\n    exit 1\r\n  else\r\n    echo "PASS: rm -rf build"\r\n  fi\r\nfi\r\n\r\n# git add . \u3092\u5b9f\u884c\r\ngit add .\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: git add ."\r\n  exit 1\r\nelse\r\n  echo "PASS: git add ."\r\nfi\r\n\r\n# git commit \u3092\u5b9f\u884c\r\ngit commit -m "$commit_message"\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: git commit"\r\n  exit 1\r\nelse\r\n  echo "PASS: git commit"\r\nfi\r\n\r\n# npm run build \u3092\u5b9f\u884c\r\nnpm run build\r\nif [ $? -ne 0 ]; then\r\n  echo "FAIL: npm run build"\r\n  exit 1\r\nelse\r\n  echo "PASS: npm run build"\r\nfi\r\n\r\n# deploy_github.sh \u3092\u7d9a\u3044\u3066\u5b9f\u884c\u53ef\u80fd\u306b\u3055\u305b\u308b\r\ndate > last_date.text\r\n\n'})}),"\n",(0,e.jsx)(r.h2,{id:"\u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u7528-python-script",children:"\u7591\u4f3c\u30ea\u30f3\u30af\u51e6\u7406\u7528 python script"}),"\n",(0,e.jsx)(r.pre,{children:(0,e.jsx)(r.code,{className:"language-python",metastring:'title="solv_pseudo_symlink.py"',children:"# -*- coding: utf-8 -*-\r\n#\r\n# \u76ee\u7684\uff1a\r\n#   Dodusaurus \u7528\u3002\u4ee5\u4e0b\u306e\u554f\u984c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3002\r\n#   \u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092 bash \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u3067\u5b9f\u884c\u3055\u305b\u3001\u305d\u306e\u5f8c\u306b\r\n#   git add \u3084 git commit, npm run build \u306a\u3069\u3092\u884c\u3046\u3002\r\n#\r\n# \u5b9f\u884c\u65b9\u6cd5\uff1a\r\n#  1. cd /c/my_prog/docusaurus/github_page\r\n#  2. python solv_pseudo_symlink.py\r\n#\r\n# \u8fd4\u308a\u5024\uff1a\r\n#   0 : \u6b63\u5e38\u7d42\u4e86\r\n#   1 : \u30a8\u30e9\u30fc\uff08\u30b3\u30d4\u30fc\u5143\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u306a\u304b\u3063\u305f\u306a\u3069\uff09\r\n#\r\n# \u554f\u984c\uff1a\r\n# Docusaurus \u306f\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u304c\u3046\u307e\u304f\u6271\u3048\u306a\u3044\u3002\r\n# \u5c11\u306a\u304f\u3068\u3082 windows11 \u74b0\u5883\u3067\u306f /blog/ \u306e\u4e0b\u306e md \u30d5\u30a1\u30a4\u30eb\u3092\r\n# docs/UFO/ \u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3055\u305b\u308b\u3068\u3001build \u3057\u3066\u30d6\u30e9\u30a6\u30b6\r\n# \u3067\u307f\u308b\u3068\u3001\u30bf\u30a4\u30c8\u30eb\uff08\u6700\u521d\u306e # \u898b\u51fa\u3057 \u76f8\u5f53\uff09\u304c\u6b20\u843d\u3059\u308b\u3002\r\n# \u3053\u306e\u305f\u3081\u3001blog \u7528\u306b\u4f5c\u6210\u3057\u305f markdown \u8a18\u4e8b\u3092 UFO \u306e\u30ab\u30c6\u30b4\u30ea\u30fc\r\n# \u306e\u8a18\u4e8b\u3068\u3057\u3066\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u306b\u3088\u3063\u3066\u6d41\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\r\n#\r\n# \u5bfe\u51e6\uff1a\r\n# \u64ec\u4f3c\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e '.', '/'\u3092\u305d\u308c\u305e\u308c \"@p\", \"@s\" \u3067\u7f6e\u304d\u63db\u3048\u305f\u3001\r\n# \u7591\u4f3c\u30ea\u30f3\u30af\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\r\n# \u3053\u306e python \u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5bfe\u5fdc\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u4e0a\u66f8\u304d\u30b3\u30d4\u30fc\u3059\u308b\u3002\r\n#\r\n# \u4f8b\uff1a\r\n# \"touch _sylk_@p@p@s@p@p@sblog@s2024-07-30-a_file.md\"\r\n# \u3092\u305f\u3068\u3048\u3070 docs/UFO/ \u306e\u4e0b\u306b\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u3001\r\n# ../../blog/2024-07-030_a_file.md\r\n# \u3092 docs/UFO/ \u306e\u4e0b\u306b\u4e0a\u66f8\u304d\u30b3\u30d4\u30fc\u3059\u308b\u3002\r\n#\r\n# \u5c65\u6b74\uff1a\r\n# 2024-07-11 \u4f5c\u6210\u3002ChatGPT-4o \u306b\u4f5c\u3089\u305b\u305f\u304c\u3001\u305d\u306e\u307e\u307e\u3067\u306f\r\n#   \u52d5\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u4e00\u90e8\u306e\u30d0\u30b0\u3092\u4fee\u6b63\u3002\r\n#\r\n\r\nimport os\r\nimport shutil\r\nimport sys\r\n\r\ndef decode_path(encoded_path):\r\n    return encoded_path.replace('@p', '.').replace('@s', '/')\r\n\r\ndef process_sylk_files(base_dir):\r\n    # print(f'{base_dir=}')\r\n    for root, dirs, files in os.walk(base_dir):\r\n        for file in files:\r\n            if file.startswith('_sylk_'):\r\n                # \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u9664\u53bb\u3057\u3066\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u30d1\u30b9\u3092\u53d6\u5f97\r\n                encoded_path = file[len('_sylk_'):]\r\n                # \u30c7\u30b3\u30fc\u30c9\u3057\u3066\u76f8\u5bfe\u30d1\u30b9\u3092\u53d6\u5f97\r\n                target_path = decode_path(encoded_path)\r\n                target_path_full = os.path.abspath(os.path.join(root, target_path))\r\n                # print(f'{root=},{dirs=}, {target_path=}, {target_path_full=}')\r\n                if os.path.exists(target_path_full):\r\n                    destination_path = os.path.join(root, os.path.basename(target_path))\r\n                    # print(f'{destination_path=}')\r\n                    # \u5143\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\r\n                    shutil.copy(target_path_full, destination_path)\r\n                    print(f'Copied {target_path_full} to\\n    \u2192 {destination_path}')\r\n                else:\r\n                    print(f'Target file does not exist: {target_path_full}')\r\n                    sys.exit(1)  # \u30a8\u30e9\u30fc\u3067\u7d42\u4e86\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    current_dir = os.getcwd()\r\n    process_sylk_files(current_dir)\r\n    sys.exit(0) # \u6b63\u5e38\u7d42\u4e86\r\n\n"})}),"\n",(0,e.jsx)(r.p,{children:"(2024-07-13)"})]})}function p(n={}){const{wrapper:r}={...(0,i.R)(),...n.components};return r?(0,e.jsx)(r,{...n,children:(0,e.jsx)(d,{...n})}):d(n)}},28453:(n,r,t)=>{t.d(r,{R:()=>o,x:()=>l});var e=t(96540);const i={},s=e.createContext(i);function o(n){const r=e.useContext(s);return e.useMemo((function(){return"function"==typeof n?n(r):{...r,...n}}),[r,n])}function l(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),e.createElement(s.Provider,{value:r},n.children)}}}]);